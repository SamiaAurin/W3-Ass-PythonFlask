## Table of Contents

1. [Project Overview](#travel-api-with-microservices)
2. [Features](#features)
3. [Technologies Used](#technologies-used)
4. [Project Setup](#project-setup)
   - [Clone the Repository](#clone-the-repository)
   - [Project Structure](#project-structure)
5. [Directory/File Descriptions](#directoryfile-descriptions)
6. [Best Practices](#best-practices)
7. [How to Run This Project](#how-to-run-this-project)
   - [Base URLs](#base-urls)
   - [Swagger Documentation](#swagger-documentation)
8. [API Endpoints](#api-endpoints)
   - [Authentication Service](#authentication-service)
   - [User Service](#user-service)
   - [Destination Service](#destination-service)
9. [Testing](#testing)


# **Travel API with Microservices**

This project is a microservices-based architecture built with Flask, focusing on the Travel API, consisting of three main services: **Authentication Service**, **User Service**, and **Destination Service**. The project includes JWT-based authentication and role-based access control.

## **Features**

- **Authentication Service**: Manages user authentication, token validation, and admin registration.
- **User Service**: Handles user registration, login, and profile management.
- **Destination Service**: Manages destinations with CRUD operations. Access to certain endpoints is restricted to admin users only.

## **Technologies Used**

- Python (Flask)
- Flask-JWT-Extended
- Flask-Swagger-UI for API documentation
- JWT for authentication
- Python-dotenv for environment variables
- OpenAPI specification (Swagger) for API documentation

## **Project Setup**

### **Clone the Repository**

```bash
git clone https://github.com/SamiaAurin/W3-Ass-PythonFlask.git
cd travel-api-microservices
```
### **Project Structure**

```
root/
│
├── authentication_service/             
│   ├── __pycache__/                                  
│   ├── venv/                          
│   ├── __init__.py                    
│   ├── .coverage                      
│   ├── .env                           
│   ├── app.py                         
│   ├── models.py                      
│   ├── requirements.txt               
│   ├── routes.py                      
│   ├── test_app.py                    
│   └── utils.py                       
│
├── destination_service/             
│   ├── __pycache__/                   
│   ├── static/                       
│   │   └── swagger.yaml               
│   ├── venv/                          
│   ├── __init__.py                    
│   ├── .coverage                      
│   ├── .env                           
│   ├── app.py                         
│   ├── models.py                      
│   ├── requirements.txt               
│   ├── routes.py                      
│   ├── test_app.py                    
│   └── utils.py                       
│
└── user_service/             
    ├── __pycache__/                   
    ├── static/                        
    │   └── swagger.yaml               
    ├── venv/                          
    ├── __init__.py                    
    ├── .coverage                      
    ├── .env                           
    ├── app.py                         
    ├── models.py                      
    ├── requirements.txt               
    ├── routes.py                      
    ├── test_app.py                    
    └── utils.py                       
```


## Directory/File Descriptions:

1. `__pycache__/`: 
   - Automatically generated directory containing Python bytecode files
   - Should be in .gitignore

2. `static/`:
   - Contains static files
   - `swagger.yaml`: API documentation and specifications

3. `venv/`:
   - Python virtual environment
   - Contains project-specific Python interpreter and packages
   - Should be in .gitignore

4. Core Files:
   - `__init__.py`: Makes the directory a Python package
   - `.coverage`: Generated by code coverage tools (e.g., pytest-cov)
   - `.env`: Environment configuration (secrets, API keys, etc.)
   - `app.py`: Application initialization and configuration
   - `models.py`: Database models and schemas
   - `requirements.txt`: List of Python package dependencies
   - `routes.py`: API endpoint definitions and request handlers
   - `test_app.py`: Test suite for the application
   - `utils.py`: Helper functions and utility code

## Best Practices:
- Keep sensitive data in `.env` file and include it in .gitignore but for this assignment keeping it in the  git so that the admin_code and secret code matches when you run the project.
- Maintain updated `requirements.txt`
- Keep tests organized in `test_app.py`
- Document API endpoints in `swagger.yaml`

## How to Run This Project

Please read the **How to Run This Project.pdf** file and follow the instructions carefully to ensure you can successfully run the project.


### Base URLs
- Authentication Service: `http://127.0.0.1:5002`
- User Service: `http://127.0.0.1:5001`
- Destination Service: `http://127.0.0.1:5004`

### Swagger Documentation
Access the API documentation (Swagger UI) for each service:
- User Service: `http://127.0.0.1:5001/docs`
- Destination Service: `http://127.0.0.1:5004/docs`

## API Endpoints

### Authentication Service

#### POST /api/auth/validate_admin_code
- Validates the admin registration code

#### POST /api/auth/decode_token
- Decodes a JWT token

### User Service

#### POST /api/users/register
- Registers a new user

#### POST /api/users/login
- Logs in a user and returns a JWT token

#### GET /api/users/profile
- Retrieves the profile of the logged-in user
- Requires: Authorization header with valid JWT token

### Destination Service

#### GET /api/destinations
- Retrieves a list of all destinations
- Public endpoint (no authentication required)

#### POST /api/destinations
- Adds a new destination
- Admin access only
- Requires: Authorization header with admin JWT token

#### PUT /api/destinations/{id}
- Updates an existing destination
- Admin access only
- Requires: Authorization header with admin JWT token

#### DELETE /api/destinations/{id}
- Deletes a destination
- Admin access only
- Requires: Authorization header with admin JWT token

## Testing

In  **How to Run This Project.pdf** file there are also instructions for how to test the each services. Run the test suites for each service using the following command:

```bash
coverage run -m unittest test_app.py
```